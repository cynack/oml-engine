import defaultConfig from './rollup.config'
import uglify from 'rollup-plugin-uglify'

export default Object.assign({}, defaultConfig, {
  output: {
    file: './build/OML.min.js',
    format: defaultConfig.output.format,
    name: defaultConfig.output.name,
    banner: defaultConfig.output.banner
  },
  plugins: [
    ...defaultConfig.plugins,
    uglify({
      output: {
        comments: function(node, comment) {
          const {value, type} = comment
          if (type == 'comment2') {
            return /@preserve|@license|@cc_on/i.test(value)
          }
        }
      }}
    )
  ]
})